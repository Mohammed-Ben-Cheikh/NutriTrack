<div class="mb-6">
  <h2 class="text-2xl font-bold text-gray-900">
    Générateur de Rapports Quotidiens IA
  </h2>
  <p class="text-gray-600">
    Analysez vos données et générez des rapports intelligents avec l'IA
  </p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <!-- Rapports générés aujourd'hui -->
  <div class="bg-white rounded-lg shadow p-6">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600">Rapports générés</p>
        <p class="text-2xl font-bold text-gray-900">12</p>
      </div>
      <div class="p-3 bg-blue-100 rounded-full">
        <i class="fas fa-file-alt text-blue-600 text-xl"></i>
      </div>
    </div>
    <div class="mt-4">
      <div class="bg-gray-200 rounded-full h-2">
        <div class="bg-indigo-600 h-2 rounded-full" style="width: 80%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-1">80% de l'objectif (15 rapports)</p>
    </div>
  </div>

  <!-- Temps de traitement moyen -->
  <div class="bg-white rounded-lg shadow p-6">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600">Temps moyen IA</p>
        <p class="text-2xl font-bold text-gray-900">2.3s</p>
      </div>
      <div class="p-3 bg-indigo-100 rounded-full">
        <i class="fas fa-brain text-indigo-600 text-xl"></i>
      </div>
    </div>
    <div class="mt-4">
      <div class="bg-gray-200 rounded-full h-2">
        <div class="bg-indigo-600 h-2 rounded-full" style="width: 92%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-1">Excellent temps de réponse</p>
    </div>
  </div>

  <!-- Taux de succès -->
  <div class="bg-white rounded-lg shadow p-6">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600">Taux de succès</p>
        <p class="text-2xl font-bold text-gray-900">98.5%</p>
      </div>
      <div class="p-3 bg-green-100 rounded-full">
        <i class="fas fa-check-circle text-green-600 text-xl"></i>
      </div>
    </div>
    <div class="mt-4">
      <div class="bg-gray-200 rounded-full h-2">
        <div class="bg-green-600 h-2 rounded-full" style="width: 98%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-1">Génération très fiable</p>
    </div>
  </div>

  <!-- Insights IA générés -->
  <div class="bg-white rounded-lg shadow p-6">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600">Insights IA</p>
        <p class="text-2xl font-bold text-gray-900">47</p>
      </div>
      <div class="p-3 bg-purple-100 rounded-full">
        <i class="fas fa-lightbulb text-purple-600 text-xl"></i>
      </div>
    </div>
    <div class="mt-4">
      <p class="text-xs text-indigo-600">+5 nouveaux aujourd'hui</p>
      <p class="text-xs text-gray-500">Analyses automatiques</p>
    </div>
  </div>
</div>

<!-- Section Historique des rapports -->
<div class="bg-white rounded-lg shadow-lg border border-gray-200">
  <div class="p-4 sm:p-6 border-b border-gray-200">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
      <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-2 sm:mb-0">
        Historique des rapports IA
      </h3>
      <div class="flex items-center space-x-2">
        <span
          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
        >
          <i class="fas fa-robot mr-1"></i>
          Rapports générés par IA
        </span>
      </div>
    </div>
  </div>

  <!-- Version desktop/tablet - Table with pagination -->
  <div class="hidden md:block overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th
            class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Date
          </th>
          <th
            class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            <i class="fas fa-file-alt mr-1 text-blue-500"></i>Type de rapport
          </th>
          <th
            class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            <i class="fas fa-clock mr-1 text-green-500"></i>Temps IA
          </th>
          <th
            class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            <i class="fas fa-chart-bar mr-1 text-purple-500"></i>Précision
          </th>
          <th
            class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            <i class="fas fa-lightbulb mr-1 text-yellow-500"></i>Insights
          </th>
          <th
            class="px-4 lg:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Statut
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200" id="historyTableBody">
        <!-- Rows will be populated by JavaScript -->
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
      <div class="flex items-center justify-between">
        <div class="flex-1 flex justify-between sm:hidden">
          <button
            id="prevPageMobile"
            class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
          >
            Précédent
          </button>
          <button
            id="nextPageMobile"
            class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
          >
            Suivant
          </button>
        </div>
        <div
          class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"
        >
          <div>
            <p class="text-sm text-gray-700">
              Affichage de <span id="startEntry" class="font-medium">1</span> à
              <span id="endEntry" class="font-medium">10</span> sur
              <span id="totalEntries" class="font-medium">47</span> résultats
            </p>
          </div>
          <div>
            <nav
              class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px"
              aria-label="Pagination"
            >
              <button
                id="prevPage"
                class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
              >
                <span class="sr-only">Précédent</span>
                <i class="fas fa-chevron-left"></i>
              </button>
              <div id="paginationNumbers" class="flex">
                <!-- Page numbers will be populated by JavaScript -->
              </div>
              <button
                id="nextPage"
                class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
              >
                <span class="sr-only">Suivant</span>
                <i class="fas fa-chevron-right"></i>
              </button>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Version mobile - Cards with pagination -->
  <div class="md:hidden">
    <div class="p-4 space-y-4" id="historyCardsContainer">
      <!-- Cards will be populated by JavaScript -->
    </div>

    <!-- Mobile pagination -->
    <div class="px-4 py-3 border-t border-gray-200">
      <div class="flex items-center justify-between">
        <button
          id="prevPageMobileCards"
          class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
        >
          <i class="fas fa-chevron-left mr-2"></i>Précédent
        </button>
        <span id="mobilePageInfo" class="text-sm text-gray-700"
          >Page 1 sur 5</span
        >
        <button
          id="nextPageMobileCards"
          class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
        >
          Suivant<i class="fas fa-chevron-right ml-2"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  const reportsData = [
    {
      date: "Aujourd'hui",
      status: "En cours",
      reportType: "Analyse nutritionnelle",
      processingTime: "2.1s",
      accuracy: "98.5%",
      insights: "5 nouveaux",
      statusType: "current",
    },
    {
      date: "Hier",
      status: "Terminé",
      reportType: "Rapport hebdomadaire",
      processingTime: "1.8s",
      accuracy: "99.2%",
      insights: "8 insights",
      statusType: "success",
    },
    {
      date: "Il y a 2 jours",
      status: "Terminé",
      reportType: "Analyse tendances",
      processingTime: "3.2s",
      accuracy: "96.8%",
      insights: "3 insights",
      statusType: "success",
    },
    {
      date: "Il y a 3 jours",
      status: "Erreur",
      reportType: "Rapport détaillé",
      processingTime: "5.1s",
      accuracy: "N/A",
      insights: "0 insights",
      statusType: "failed",
    },
    {
      date: "Il y a 4 jours",
      status: "Terminé",
      reportType: "Analyse quotidienne",
      processingTime: "1.9s",
      accuracy: "97.3%",
      insights: "6 insights",
      statusType: "success",
    },
    {
      date: "Il y a 5 jours",
      status: "Terminé",
      reportType: "Rapport personnalisé",
      processingTime: "2.7s",
      accuracy: "98.9%",
      insights: "7 insights",
      statusType: "success",
    },
    {
      date: "Il y a 6 jours",
      status: "Terminé",
      reportType: "Analyse comparative",
      processingTime: "4.2s",
      accuracy: "95.1%",
      insights: "4 insights",
      statusType: "success",
    },
    {
      date: "Il y a 7 jours",
      status: "Terminé",
      reportType: "Rapport mensuel",
      processingTime: "6.8s",
      accuracy: "99.7%",
      insights: "12 insights",
      statusType: "success",
    },
  ];
  let currentPage = 1;
  const itemsPerPage = 5;
  const totalPages = Math.ceil(reportsData.length / itemsPerPage);

  function getStatusIcon(statusType) {
    switch (statusType) {
      case "current":
        return '<i class="fas fa-clock text-blue-600 text-sm"></i>';
      case "success":
        return '<i class="fas fa-check text-green-600 text-sm"></i>';
      case "failed":
        return '<i class="fas fa-exclamation-triangle text-red-600 text-sm"></i>';
      default:
        return '<i class="fas fa-file-alt text-gray-600 text-sm"></i>';
    }
  }

  function getStatusBadge(statusType, status) {
    switch (statusType) {
      case "current":
        return '<span class="inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200"><i class="fas fa-clock mr-1"></i>En cours</span>';
      case "success":
        return '<span class="inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200"><i class="fas fa-check-circle mr-1"></i>Terminé</span>';
      case "failed":
        return '<span class="inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 border border-red-200"><i class="fas fa-exclamation-triangle mr-1"></i>Erreur</span>';
      default:
        return '<span class="inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800">Terminé</span>';
    }
  }

  function getCardBackground(statusType) {
    switch (statusType) {
      case "current":
        return "bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200";
      case "success":
        return "bg-gradient-to-r from-green-50 to-emerald-50 border-green-200";
      case "failed":
        return "bg-gradient-to-r from-red-50 to-pink-50 border-red-200";
      default:
        return "bg-gradient-to-r from-gray-50 to-slate-50 border-gray-200";
    }
  }

  function renderTable() {
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const pageData = reportsData.slice(startIndex, endIndex);

    const tbody = document.getElementById("historyTableBody");
    tbody.innerHTML = pageData
      .map(
        (item) => `
    <tr class="hover:bg-gray-50 transition-colors duration-200">
      <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
        <div class="flex items-center">
          <div class="flex-shrink-0 w-8 h-8 ${
            item.statusType === "current"
              ? "bg-blue-100"
              : item.statusType === "success"
              ? "bg-green-100"
              : "bg-red-100"
          } rounded-full flex items-center justify-center">
            ${getStatusIcon(item.statusType)}
          </div>
          <div class="ml-3">
            <div class="text-sm font-medium text-gray-900">${item.date}</div>
            <div class="text-xs text-gray-500">${item.status}</div>
          </div>
        </div>
      </td>
      <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${
        item.reportType
      }</td>
      <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${
        item.processingTime
      }</td>
      <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${
        item.accuracy
      }</td>
      <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${
        item.insights
      }</td>
      <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-center">
        ${getStatusBadge(item.statusType, item.status)}
      </td>
    </tr>
  `
      )
      .join("");
  }

  function renderCards() {
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const pageData = reportsData.slice(startIndex, endIndex);

    const container = document.getElementById("historyCardsContainer");
    container.innerHTML = pageData
      .map(
        (item) => `
    <div class="${getCardBackground(item.statusType)} rounded-lg p-4 border">
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center">
          <div class="w-10 h-10 ${
            item.statusType === "current"
              ? "bg-blue-100"
              : item.statusType === "success"
              ? "bg-green-100"
              : "bg-red-100"
          } rounded-full flex items-center justify-center">
            ${getStatusIcon(item.statusType)}
          </div>
          <div class="ml-3">
            <h4 class="font-semibold text-gray-900">${item.date}</h4>
            <p class="text-xs text-gray-500">${item.reportType}</p>
          </div>
        </div>
        ${getStatusBadge(item.statusType, item.status)}
      </div>
      <div class="grid grid-cols-2 gap-3 text-sm">
        <div class="flex items-center">
          <i class="fas fa-clock text-green-500 mr-2"></i>
          <span class="font-medium">${item.processingTime}</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-chart-bar text-purple-500 mr-2"></i>
          <span class="font-medium">${item.accuracy}</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
          <span class="font-medium">${item.insights}</span>
        </div>
        <div class="flex items-center">
          <i class="fas fa-file-alt text-blue-500 mr-2"></i>
          <span class="font-medium text-xs">${item.reportType}</span>
        </div>
      </div>
    </div>
  `
      )
      .join("");
  }

  function renderPagination() {
    const startEntry = (currentPage - 1) * itemsPerPage + 1;
    const endEntry = Math.min(currentPage * itemsPerPage, reportsData.length);

    document.getElementById("startEntry").textContent = startEntry;
    document.getElementById("endEntry").textContent = endEntry;
    document.getElementById("totalEntries").textContent = reportsData.length;
    document.getElementById(
      "mobilePageInfo"
    ).textContent = `Page ${currentPage} sur ${totalPages}`;

    // Render page numbers
    const paginationNumbers = document.getElementById("paginationNumbers");
    let numbersHTML = "";

    for (let i = 1; i <= totalPages; i++) {
      if (i === currentPage) {
        numbersHTML += `<button class="relative inline-flex items-center px-4 py-2 border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600">${i}</button>`;
      } else {
        numbersHTML += `<button onclick="goToPage(${i})" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">${i}</button>`;
      }
    }
    paginationNumbers.innerHTML = numbersHTML;

    // Update button states
    document.getElementById("prevPage").disabled = currentPage === 1;
    document.getElementById("nextPage").disabled = currentPage === totalPages;
    document.getElementById("prevPageMobile").disabled = currentPage === 1;
    document.getElementById("nextPageMobile").disabled =
      currentPage === totalPages;
    document.getElementById("prevPageMobileCards").disabled = currentPage === 1;
    document.getElementById("nextPageMobileCards").disabled =
      currentPage === totalPages;
  }

  function goToPage(page) {
    currentPage = page;
    renderTable();
    renderCards();
    renderPagination();
  }

  function previousPage() {
    if (currentPage > 1) {
      goToPage(currentPage - 1);
    }
  }

  function nextPage() {
    if (currentPage < totalPages) {
      goToPage(currentPage + 1);
    }
  }

  document.getElementById("prevPage").addEventListener("click", previousPage);
  document.getElementById("nextPage").addEventListener("click", nextPage);
  document
    .getElementById("prevPageMobile")
    .addEventListener("click", previousPage);
  document.getElementById("nextPageMobile").addEventListener("click", nextPage);
  document
    .getElementById("prevPageMobileCards")
    .addEventListener("click", previousPage);
  document
    .getElementById("nextPageMobileCards")
    .addEventListener("click", nextPage);

  document.addEventListener("DOMContentLoaded", function () {
    renderTable();
    renderCards();
    renderPagination();
  });
</script>

<div class="mt-8 bg-white rounded-lg shadow">
  <div class="p-6 border-b border-gray-200">
    <h3 class="text-lg font-semibold text-gray-900">
      Objectifs IA de la semaine
    </h3>
  </div>
  <div class="p-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="text-center">
        <div
          class="inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4"
        >
          <i class="fas fa-file-alt text-indigo-600 text-xl"></i>
        </div>
        <h4 class="font-medium text-gray-900 mb-2">Rapports quotidiens</h4>
        <p class="text-sm text-gray-600">5/7 jours accomplis</p>
        <div class="mt-2 bg-gray-200 rounded-full h-2">
          <div class="bg-indigo-600 h-2 rounded-full" style="width: 71%"></div>
        </div>
      </div>

      <div class="text-center">
        <div
          class="inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4"
        >
          <i class="fas fa-brain text-indigo-600 text-xl"></i>
        </div>
        <h4 class="font-medium text-gray-900 mb-2">Précision IA</h4>
        <p class="text-sm text-gray-600">Maintenir >95% de précision</p>
        <div class="mt-2 bg-gray-200 rounded-full h-2">
          <div class="bg-indigo-600 h-2 rounded-full" style="width: 98%"></div>
        </div>
      </div>

      <div class="text-center">
        <div
          class="inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4"
        >
          <i class="fas fa-lightbulb text-indigo-600 text-xl"></i>
        </div>
        <h4 class="font-medium text-gray-900 mb-2">Insights générés</h4>
        <p class="text-sm text-gray-600">47 analyses automatiques</p>
        <div class="mt-2 bg-gray-200 rounded-full h-2">
          <div class="bg-indigo-600 h-2 rounded-full" style="width: 94%"></div>
        </div>
      </div>
    </div>
  </div>
</div>
